(()=>{"use strict";var e={447:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.init=function(){new s("#buddy_generate_form"),new r("#settings-deepl")},e}();t.default=i;var s=function(){function e(e){var t=this;this.errors=[],this.$error_alert=$("#buddy-alert-error"),this.$success_alert=$("#buddy-alert-success"),this.$entry_section_select=$("#buddy_entry_section"),this.$spoiler_label=$(".buddy-spoiler label:first-child"),this.$section_images=$("#buddy_include_section_images"),this.$folder_id_cont=$("#buddy_folder_id_cont"),this.$featured_image=$("#buddy_include_featured_image"),this.$featured_field_id_cont=$("#buddy_featured_field_id_cont"),this.$form=$(e),this.$topic=$("#buddy_topic"),this.$sections=$("#buddy_sections"),this.$max_words=$("#buddy_max_words"),this.$entry_section=$("#buddy_entry_section"),this.$entry_field=$("#buddy_entry_field"),this.$folder_id=$("#buddy_folder_id"),this.$featured_image_id=$("#buddy_featured_field_id"),this.$form.on("submit",(function(e){return t.generate_entry(e)})),this.init_fields_select(),this.$entry_section_select.on("change",(function(e){return t.handle_entry_section_select(e)})),this.$spoiler_label.on("click",(function(e){return t.handle_spoiler_click(e)})),this.$section_images.on("change",(function(e){return t.handle_section_image_click(e)})),this.$featured_image.on("change",(function(e){return t.handle_featured_image_click(e)})),$('input[type="range"]').on("mousedown mousemove mouseup keydown",(function(){var e,t=null!==(e=$(this).data("prefix"))&&void 0!==e?e:"";$(this).parents(".buddy-slider-cont").find("span").text(t+$(this).val())}))}return e.prototype.handle_section_image_click=function(e){$(e.currentTarget).is(":checked")?this.$folder_id_cont.show():this.$folder_id_cont.hide()},e.prototype.handle_featured_image_click=function(e){$(e.currentTarget).is(":checked")?this.$featured_field_id_cont.show():this.$featured_field_id_cont.hide()},e.prototype.handle_spoiler_click=function(e){var t=$(e.currentTarget).parent();t.hasClass("active")?t.removeClass("active"):t.addClass("active")},e.prototype.init_fields_select=function(){this.fields_select_entry_field_options=$("#buddy_entry_field option"),console.log(this.fields_select_entry_field_options),$("#buddy_entry_field").html(this.fields_select_entry_field_options[0]),this.fields_select_featured_field_options=$("#buddy_featured_field_id option"),console.log(this.fields_select_featured_field_options),$("#buddy_featured_field_id").html(this.fields_select_featured_field_options[0])},e.prototype.handle_entry_section_select=function(e){var t=$(e.currentTarget).val(),i=this.fields_select_entry_field_options.clone();$("#buddy_entry_field").html(i.filter((function(){return $(this).data("id")==t})));var s=this.fields_select_featured_field_options.clone();$("#buddy_featured_field_id").html(s.filter((function(){return $(this).data("id")==t}))),this.$featured_image_id.find("option").length?(this.$featured_field_id_cont.find(".error").hide(),this.$featured_field_id_cont.find(".buddy-select").show()):(this.$featured_field_id_cont.find(".error").show(),this.$featured_field_id_cont.find(".buddy-select").hide())},e.prototype.generate_entry=function(e){var t=this;console.log("event",e),e.preventDefault(),this.validate_form()&&($("#buddy_generate_entry").prop("disabled",!0).addClass("loading"),$.ajax({type:"POST",url:"/",data:this.$form.serializeArray(),success:function(e){e.res?t.view_success_message(e.msg):(t.errors.push(e.msg),t.view_error_message()),$("#buddy_generate_entry").prop("disabled",!1).removeClass("loading")},error:function(e){console.log(e),t.errors.push(e.statusText),t.view_error_message(),$("#buddy_generate_entry").prop("disabled",!1).removeClass("loading")},dataType:"json"}))},e.prototype.validate_form=function(){return this.hide_message(),""==this.$topic.val()&&(this.errors.push("Please, provide topic"),console.log("Please, provide topic")),""==this.$sections.val()&&this.errors.push("Please, type sections count per article"),""==this.$max_words.val()&&this.errors.push("Please, type maximum words per section"),""==this.$entry_section.val()&&this.errors.push("Please, select entry section"),""==this.$entry_field.val()&&this.errors.push("Please, select entry description field"),this.$section_images.is(":checked")&&!this.$folder_id.val()&&this.errors.push("Please, select volume for images"),this.$featured_image.is(":checked")&&""==this.$featured_image_id.val()&&this.errors.push("Please, select featured image field"),!this.errors.length||(this.view_error_message(),!1)},e.prototype.view_error_message=function(){var e="";this.errors.forEach((function(t){e+="<li>".concat(t,"</li>")})),this.$error_alert.html(e).show()},e.prototype.view_success_message=function(e){this.$success_alert.html(e).show()},e.prototype.hide_message=function(){this.errors=[],this.$error_alert.html("").hide(),this.$success_alert.html("").hide()},e}(),r=function(){function e(e){this.$settings=$(e),this.$glossaries=null,this.$settings.length&&(this.$glossaries=this.$settings.find('[name="settings[deepLGlossaryId]"]'),this.glossaries())}return e.prototype.glossaries=function(){var e,t=this;if(null!=this.$glossaries){var i=this.$glossaries.val();null===(e=this.$glossaries)||void 0===e||e.html('<option value="">None</option>'),$.ajax({url:"/admin/convergine-contentbuddy/deepl/glossaries",type:"GET",dataType:"json",success:function(e){var s;e&&e.success&&(e.glossaries.forEach((function(e){var s;null===(s=t.$glossaries)||void 0===s||s.append(new Option(e.name,e.id,!1,e.id===i))})),null===(s=t.$glossaries)||void 0===s||s.parents("#settings-deepLGlossaryField").slideDown(200))},error:function(e){console.error("Error fetching DeepL glossaries:",e)}})}},e}()},991:(e,t,i)=>{i.r(t)}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,i),o.exports}i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s;s=i(447),i(991),document.addEventListener("DOMContentLoaded",(function(){s.default.init()}))})();